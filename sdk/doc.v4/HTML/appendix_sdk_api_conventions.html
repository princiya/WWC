<!DOCTYPE HTML>
<html>
<head>
   <title>Appendix B: SDK API Conventions</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="SDK API Conventions" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <style type="text/css">
     body { margin: 0px; background: #FFFFFF; }
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "appendix_sdk_api_conventions.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<table style="width:100%; border:none; border-spacing:0px; padding:5px; background:#FFCC99">
  <tr style="vertical-align:middle">
    <td style="text-align:left">
      <h1 class="p_Heading1"><span class="f_Heading1">Appendix B: SDK API Conventions</span></h1>

    </td>
    <td style="text-align:right">
     <a href="docm_legal_information.html">Top</a>&nbsp;
     <a href="appendix_data_type_definitions.html">Previous</a>&nbsp;
     <a href="appendix_recorded_file_forma.html">Next</a>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table style="width:100%;border:none;border-spacing:0px"><tr style="vertical-align:top"><td style="text-align:left;padding:5px">
<p class="p_Body"><span class="f_Body">A typical SDK interface is illustrated in Example 158:</span></p>
<p class="p_Body"><span class="f_Body"><a class="dropdown-toggle" href="javascript:HMToggle('toggle','TOGGLE0186A1')">C++ Example 158: Typical SDK Interface Design</a></span></p>
<div id="TOGGLE0186A1" style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table class="CodeSegment" style="border-color:#ffe6c0 #ff9900 #ff9900 #ffe6c0; border-style:solid; border-width:1px; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; background-color:#ffffff; padding:4px; border-color:#ff9900 #ffe6c0 #ffe6c0 #ff9900; border-style:solid; border-width:1px;"><p class="p_CodeExample"><span class="f_CodeExample">class PXCMyInterface:public PXCBase {</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">public:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample"> &nbsp; &nbsp;PXC_CUID_OVERWRITE(0x12345678); // my unique interface identifier</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample"> &nbsp; &nbsp;// my configurations</span></p>
<p class="p_CodeExample"><span class="f_CodeExample"> &nbsp; &nbsp;struct ProfileInfo {</span></p>
<p class="p_CodeExample"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;….</span></p>
<p class="p_CodeExample"><span class="f_CodeExample"> &nbsp; &nbsp;};</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample"> &nbsp; &nbsp;// configuration inquiry and set working configuration</span></p>
<p class="p_CodeExample"><span class="f_CodeExample"> &nbsp; &nbsp;virtual pxcStatus PXCAPI QueryProfile(pxcI32 idx, ProfileInfo *pinfo)=0;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample"> &nbsp; &nbsp;virtual pxcStatus PXCAPI SetProfile(ProfileInfo *pinfo)=0;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample"> &nbsp; &nbsp;// Now do something asynchronously</span></p>
<p class="p_CodeExample"><span class="f_CodeExample"> &nbsp; &nbsp;virtual pxcStatus PXCAPI ProcessAsync(…, PXCScheduler::SyncPoint *sp)=0;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">};</span></p>
</td>
</tr>
</table>
</div>
<p class="p_InternalHeading"><span class="f_InternalHeading">Naming Conventions</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span class="f_IndentedList">All classes, functions, and structures in the global name space use “</span><span class="f_CodeExample">PXC</span><span class="f_IndentedList">” or “</span><span class="f_CodeExample">pxc</span><span class="f_IndentedList">” as a prefix. </span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span class="f_IndentedList">Minimize creating classes, functions, and structures in the global name space. Put classes, functions, and structures in their respective class scopes.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span class="f_IndentedList">The class and function names start with a capital letter.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span class="f_IndentedList">The variable names start with a lower-case letter.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span class="f_IndentedList">If a class, function, or variable name contains multiple words, usually the SDK capitalizes the first letter of the second word.</span></td></tr></table></div><p class="p_CodeExample" style="margin: 0px 0px 0px 72px;"><span class="f_CodeExample">class MyClass: public PXCBase {</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 72px;"><span class="f_CodeExample">public:</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 72px;"><span class="f_CodeExample"> &nbsp; &nbsp;struct MyStruct {</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 72px;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;MyStruct *myField1;</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 72px;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;pxcI32 myField2;</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 72px;"><span class="f_CodeExample"> &nbsp; &nbsp;};</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 72px;"><span class="f_CodeExample">};</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span style="font-size: 10pt; font-family: Verdana;">The macros and enumerator definitions use all capital letters with words separated by an underline.</span></td></tr></table></div><p class="p_CodeExample" style="margin: 0px 0px 0px 72px;"><span class="f_CodeExample">#define PXC_DEFINE_UID(…) …</span></p>
<p class="p_InternalHeading"><span class="f_InternalHeading">Interface and Member Function Conventions</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span class="f_IndentedList">Each SDK interface is a C++ pure virtual class derived from the </span><span class="f_CodeExample"><a href="pxcbase.html" class="topiclink">PXCBase</a></span><span class="f_IndentedList"> interface. The SDK interface must have a unique class identifier. Use the </span><span class="f_CodeExample">PXC_CUID_OVERWRITE</span><span class="f_IndentedList"> macro to define the class identifier.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span class="f_IndentedList">Each SDK interface must contain pure virtual functions only, with or without default implementation. No constructor or desctructor.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span class="f_IndentedList">Do not use exception handling or dynamic cast in interface definitions or module implementations, as these features do not reliably work across multiple compilers.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span class="f_IndentedList">Most SDK functions should return a status code,  </span><span class="f_CodeExample"><a href="pxcstatus.html" class="topiclink">pxcStatus</a></span><span class="f_IndentedList">, unless the functions are simple enough that they return some internal variables without any processing.</span></td></tr></table></div><p class="p_CodeExample" style="margin: 0px 0px 0px 72px;"><span class="f_CodeExample">virtual pxcStatus &nbsp; PXCAPI &nbsp;SetTimeStamp(pxcI64 ts)=0;</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 72px;"><span class="f_CodeExample">virtual pxcI64 &nbsp; &nbsp; &nbsp;PXCAPI &nbsp;QueryTimeStamp(void)=0;</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span style="font-size: 10pt; font-family: Verdana;">For bit-OR’ed field enumerators, the SDK usually defines them as enumerators with inline helper functions for bit-OR operations. The helper functions are not needed if the SDK uses the values directly without the bit-OR operations.</span></td></tr></table></div><p class="p_CodeExample" style="margin: 0px 0px 0px 74px;"><span class="f_CodeExample">enum ImplGroup {</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 74px;"><span class="f_CodeExample"> &nbsp; &nbsp;IMPL_GROUP_CORE = 0x80000000,</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 74px;"><span class="f_CodeExample"> &nbsp; &nbsp;IMPL_GROUP_USER = 0x40000000,</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 74px;"><span class="f_CodeExample">};</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 74px;"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 74px;"><span class="f_CodeExample">__inline static ImplGroup operator|(ImplGroup a, ImplGroup b) {</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 74px;"><span class="f_CodeExample"> &nbsp; &nbsp;return (ImplGroup)((int)a | (int)b);</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 74px;"><span class="f_CodeExample">}</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 74px;"><span class="f_CodeExample">&nbsp;</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span style="font-size: 10pt; font-family: Verdana;">For consistency, use the following two functions for module configuration query and setup:</span></td></tr></table></div><p class="p_CodeExample" style="margin: 0px 0px 0px 72px;"><span class="f_CodeExample">virtual pxcStatus PXCAPI QueryProfile(pxcI32 pidx, ProfileInfo *pinfo);</span></p>
<p class="p_CodeExample" style="margin: 0px 0px 0px 72px;"><span class="f_CodeExample">virtual pxcStatus PXCAPI SetProfile(ProfileInfo *pinfo);</span></p>
<p class="p_InternalHeading"><span class="f_InternalHeading">Language Limitations</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span style="font-size: 10pt; font-family: Verdana;">Observe different language limitations to facilitate the porting to these languages. Here are a few most common ones:</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 72px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span style="font-size: 10pt; font-family: Verdana;">Java* (as well as Microsoft* .NET*) does not support unsigned data types. Use unsigned data types unless absolutely necessary.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 72px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span style="font-size: 10pt; font-family: Verdana;">Java does not support returning primitive data types through reference in function arguments. Avoid using the following function signature:</span></td></tr></table></div><p class="p_IndentedList" style="text-indent: -1px; margin: 7px 0px 7px 120px;"><span class="f_CodeExample" style="font-weight: bold; text-decoration: underline;">Avoid</span><span class="f_CodeExample">: &nbsp; &nbsp; virtual void PXCAPI QueryValue(pxcI32 &amp;pidx); </span></p>
<p class="p_IndentedList" style="text-indent: -1px; margin: 7px 0px 7px 120px;"><span class="f_CodeExample" style="font-weight: bold; text-decoration: underline;">Suggested</span><span class="f_CodeExample">: virtual pxcI32 PXCAPI QueryValue(void);</span></p>
<p class="p_InternalHeading"><span class="f_InternalHeading">Data and Control Flow Conventions</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span class="f_IndentedList">Use the </span><span class="f_CodeExample"><a href="pxcimage.html" class="topiclink">PXCImage</a></span><span class="f_IndentedList"> and </span><span class="f_CodeExample"><a href="pxcaudio.html" class="topiclink">PXCAudio</a></span><span class="f_IndentedList"> interfaces to abstract image and audio buffers. These buffers may be in system memory buffers or in OS-specific surfaces.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span class="f_IndentedList">Any SDK function that performs anything more than trivial tasks should be asynchronous. The function returns immediately with an SP. </span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span class="f_IndentedList">Design asynchronous I/O functions so that the functions can be chained into an asynchronous pipeline for better performance. A counter example is that if there are multiple faces in a picture, it is not a good design if the asynchronous function only detects a single face. The application must make multiple calls on the picture. The application cannot determine beforehand how many loops are needed. Instead, design the function to detect all faces at once. Any subsequent asynchronous functions should also process all faces.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 36px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:36px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#9642;</span></td><td style="border:none"><span class="f_IndentedList">Asynchronous functions and asynchronous pipelines work best if, with any input data, each function in the pipeline generates some output and can be processed by subsequent functions. It is not a good design when an asynchronous function requires more inputs (worse, irregular amount of inputs) to generate an output. Consider a callback design for this type of pattern of operations.</span></td></tr></table></div><p class="p_Body"><span class="f_Body">&nbsp;</span></p>

</td></tr></table>

<script type="text/javascript">
HMInitToggle('TOGGLE0186A1','hm.type','dropdown','hm.state','0');
</script>
</body>
</html>
