<!DOCTYPE HTML>
<html>
<head>
   <title>Sample: FF_IQSampleTool.cs</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="C# sample,FF_IQSampleTool.cs" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <style type="text/css">
     body { margin: 0px; background: #FFFFFF; }
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "samples_sample_iq_sample_tool_cs.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<table style="width:100%; border:none; border-spacing:0px; padding:5px; background:#FFCC99">
  <tr style="vertical-align:middle">
    <td style="text-align:left">
      <h1 class="p_Heading1"><span class="f_Heading1">Sample: FF_IQSampleTool.cs</span></h1>

    </td>
    <td style="text-align:right">
     <a href="docm_legal_information.html">Top</a>&nbsp;
     <a href="samples_sample_hands_console.html">Previous</a>&nbsp;
     <a href="samples_sample_object_tracker.html">Next</a>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table style="width:100%;border:none;border-spacing:0px"><tr style="vertical-align:top"><td style="text-align:left;padding:5px">
<p class="p_InternalHeading"><span class="f_InternalHeading">Introduction</span></p>
<p class="p_Body"><span class="f_Body">The </span><span class="f_CodeExample">FF_IQSampleTool.cs</span><span class="f_Body"> application is based on the </span><span class="f_CodeExample">FF_RawStreams.cs</span><span class="f_Body"> sample. &nbsp;It showcases how to create tests for image quality that can be used with your camera. &nbsp;It features:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Automatic Marker tracking</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">XYZ on-hover output for depth streams</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Test for UV Map alignment error</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Test for depth uniformity</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Test for absolute depth values</span></td></tr></table></div><p class="p_Body"><span class="f_Body">This application requires the use of a Port3 Test Chart. &nbsp;If you do not have one, you can print your own (Included in the source is “Port 3 Chart.pdf” under the </span><span class="f_CodeExample">Assets</span><span class="f_Body"> directory), as illustrated in Figure 134, but your test results for the protruding square will not be accurate. &nbsp;(The protruding square measures 12cm x 12cm x 5cm – you can also create your own out of card stock paper and attach it to your printed chart).</span></p>
<p class="p_Body" style="text-align: center;"><img src="samples_clip0017_zoom55.png" width="577" height="446" alt="" style="margin:0px auto 0px auto;width:577px;height:446px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 134: Test Chart for use with IQ Sample Tool</span></p>
<p class="p_InternalHeading"><span class="f_InternalHeading">Getting Started</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:20px"><span style="font-size:11pt; font-family: 'Intel Clear';color:#000000;">1.</span></td><td style="border:none"><span class="f_Body">Obtain a chart. &nbsp;If you have a Port3 test chart, go to the next step. &nbsp;If not, you will have to create one.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:20px"><span style="font-size:11pt; font-family: 'Intel Clear';color:#000000;">2.</span></td><td style="border:none"><span class="f_Body">Setup your test area. Position your camera 50 cm away from the test chart. Ensure that the chart is parallel with the plane of the camera. If not parallel, test results can be skewed. (You can use a box, a metallic frame, the test chart with included spacer, etc. to do this).</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:20px"><span style="font-size:11pt; font-family: 'Intel Clear';color:#000000;">3.</span></td><td style="border:none"><span class="f_Body">Launch the application. If the camera is loaded successfully, the </span><span class="f_CodeExample">Depth</span><span class="f_Body"> radio button will be selectable. You will also see the 3D camera under the </span><span class="f_CodeExample">Device</span><span class="f_Body"> drop down menu.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:20px"><span style="font-size:11pt; font-family: 'Intel Clear';color:#000000;">4.</span></td><td style="border:none"><span class="f_Body">Select the </span><span class="f_CodeExample">Color</span><span class="f_Body"> radio button and click on “</span><span class="f_CodeExample">Start Streaming</span><span class="f_Body">” to run video.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:20px"><span style="font-size:11pt; font-family: 'Intel Clear';color:#000000;">5.</span></td><td style="border:none"><span class="f_Body">For landmark tracking, the program must know the location of the test chart. To do this, you must outline the edges of the test chart. Drag your mouse cursor from one corner of the chart to the other. When done, click on “</span><span class="f_CodeExample">Set RGB Border</span><span class="f_Body">”. See Figure 135 for an illustration.</span></td></tr></table></div><p class="p_Body" style="text-align: center;"><img src="samples_clip0018_zoom58.png" width="552" height="436" alt="" style="margin:0px auto 0px auto;width:552px;height:436px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 135: Specifying the chart edges for the Depth video stream.</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:20px"><span style="font-size:11pt; font-family: 'Intel Clear';color:#000000;">6.</span></td><td style="border:none"><span class="f_Body">Ensure the fiducial markers have been located properly. You should see the black circles outlined by red squares. You should also see the black crosshairs in the center of the black circle markers. Look at Figure 136 for the proper alignment (left) and the improper alignment (right). Improper alignment stems from poor lighting (for the RGB video) or from the rounding error introduced during the edge selection. If the markers are not detected properly, repeat step 5, but experiment with different selection sizes.</span></td></tr></table></div><p class="p_Body" style="text-align: center;"><img src="samples_clip0019.png" width="52" height="60" alt="" style="margin:0px auto 0px auto;width:52px;height:60px;border:none" /><span class="f_Body"> &nbsp; <img src="samples_clip0020.png" width="66" height="54" alt="" style="margin:0px auto 0px auto;width:66px;height:54px;border:none" /></span></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 136: Left: Properly detected fiducial marker. &nbsp;Right: Detection Error</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:20px"><span style="font-size:11pt; font-family: 'Intel Clear';color:#000000;">7.</span></td><td style="border:none"><span class="f_Body">Your screen should look like Figure 137.</span></td></tr></table></div><p class="p_Body" style="text-align: center;"><img src="samples_clip0021_zoom60.png" width="576" height="456" alt="" style="margin:0px auto 0px auto;width:576px;height:456px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 137: Proper Located Fiducial Markers.</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:20px"><span style="font-size:11pt; font-family: 'Intel Clear';color:#000000;">8.</span></td><td style="border:none"><span class="f_Body">Now select the </span><span class="f_CodeExample">Depth</span><span class="f_Body"> radio button. The video will change to a depth-only view.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:20px"><span style="font-size:11pt; font-family: 'Intel Clear';color:#000000;">9.</span></td><td style="border:none"><span class="f_Body">Specify the chart edges by dragging your mouse from one corner to the opposite corner. Click on “</span><span class="f_CodeExample">Set Depth Border</span><span class="f_Body">” (see Figure 158).</span></td></tr></table></div><p class="p_Body" style="text-align: center;"><img src="samples_clip0022_zoom61.png" width="588" height="464" alt="" style="margin:0px auto 0px auto;width:588px;height:464px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 138: Specifying chart edges for Depth stream.</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:20px"><span style="font-size:11pt; font-family: 'Intel Clear';color:#000000;">10.</span></td><td style="border:none"><span class="f_Body"> Your view should now look like Figure 139:</span></td></tr></table></div><p class="p_Body" style="text-align: center;"><img src="samples_clip0023_zoom57.png" width="547" height="435" alt="" style="margin:0px auto 0px auto;width:547px;height:435px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 139: Selected Depth Edges.</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:20px"><span style="font-size:11pt; font-family: 'Intel Clear';color:#000000;">11.</span></td><td style="border:none"><span class="f_Body"> Notice that the fiducial markers are outlined in the white squares. The green squares are an array of ROIs (Regions of Interest) that are used for the Uniformity test. Check that all fiducial markers are properly aligned and that all green ROIs fall within the depth chart. If not, repeat Step 9.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:20px"><span style="font-size:11pt; font-family: 'Intel Clear';color:#000000;">12.</span></td><td style="border:none"><span class="f_Body"> Click </span><span class="f_CodeExample">Run Tests</span><span class="f_Body"> to analyze data.</span></td></tr></table></div><p class="p_InternalHeading"><span class="f_InternalHeading">Tests</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body" style="font-weight: bold;">UV Map: Alignment Error</span></td></tr></table></div><p class="p_Body"><span class="f_Body">The UV Map aligns the RGB stream with the depth stream. This tests calculates the error in this alignment. An example of this error can be visibly seen when using the test chart. See Figure 140 for an example. Notice that the circular fiducial markers do not align. This is the UV Map alignment error.</span></p>
<p class="p_Body" style="text-align: center;"><img src="samples_clip0024.png" width="330" height="270" alt="" style="margin:0px auto 0px auto;width:330px;height:270px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 140 :Depth data (green dots) overlayed on color stream.  </span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body" style="font-weight: bold;">Absolute Depth Error</span></td></tr></table></div><p class="p_Body"><span class="f_Body">This measures the depth from the surface of the protruding square and the camera plane. It is then compared to depth values recorded in the center of the black fiducial markers. Since the protruding square has a measurement of 12cm x 12cm x 5cm, the difference measured should equal 5 cm (50mm).</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body" style="font-weight: bold;">Uniformity Test</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 17px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Courier New';color:#000000;">o</span></td><td style="border:none"><span class="f_Body">This test creates an array of ROIs. The depth data of each ROI is then processed to get the mean and standard deviation. Uniformity can then be measured.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 17px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Courier New';color:#000000;">o</span></td><td style="border:none"><span class="f_Body">Any tilt error also becomes apparent with these results.</span></td></tr></table></div><p class="p_Body"><span class="f_Body">&nbsp;</span></p>

</td></tr></table>

</body>
</html>
