<!DOCTYPE HTML>
<html>
<head>
   <title>The Metaio Toolbox</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="Metaio Toolbox" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <style type="text/css">
     body { margin: 0px; background: #FFFFFF; }
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "manuals_the_metaio_toolbox.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<table style="width:100%; border:none; border-spacing:0px; padding:5px; background:#FFCC99">
  <tr style="vertical-align:middle">
    <td style="text-align:left">
      <h1 class="p_Heading1"><span class="f_Heading1">The Metaio* Toolbox</span></h1>

    </td>
    <td style="text-align:right">
     <a href="docm_legal_information.html">Top</a>&nbsp;
     <a href="manuals_object_tracking.html">Previous</a>&nbsp;
     <a href="manuals_object_tracking_via_sense_manager.html">Next</a>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table style="width:100%;border:none;border-spacing:0px"><tr style="vertical-align:top"><td style="text-align:left;padding:5px">
<p class="p_Body"><span class="f_Body">Use the </span><span class="f_CodeExample">Metaio Toolbox</span><span class="f_Body"> to create or edit 3D tracking maps of textured objects. The resulting 3D tracking maps are needed for 3D feature-based or edge-based tracking. The toolbox also provides camera calibration for better tracking accuracy. </span></p>
<p class="p_Body"><span class="f_Body">Run the toolbox executable </span><span class="f_CodeExample">$(RSSDK_DIR)/contrib/Metaio/MetaioTrackerToolbox/MetaioTrackerToolbox.exe</span><span class="f_Body">. The toolbox landing page for feature selection is shown in Figure 38.</span></p>
<p class="p_Body" style="text-align: center;"><img src="manuals_clip0030.png" width="466" height="388" alt="" style="margin:0px auto 0px auto;width:466px;height:388px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 38: The Tool Box Landing Page</span></p>
<p class="p_InternalHeading"><span class="f_InternalHeading">Calibrating the Camera</span></p>
<p class="p_Body"><span class="f_Body">With the help of ID markers, the toolbox can calibrate tracking parameters to an individual camera device for better tracking results. To calibrate the camera, follow the steps:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Select </span><span class="f_CodeExample">Camera Calibration</span><span class="f_Body"> from the toolbox landing page, as illustrated in Figure 38. The toolbox page for camera calibration is shown in Figure 39.</span></td></tr></table></div><p class="p_Body" style="text-align: center;"><img src="manuals_clip0033_zoom72.png" width="632" height="381" alt="" style="margin:0px auto 0px auto;width:632px;height:381px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 39: The Camera Calibration Page</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Select the camera, the camera resolution (ideally matching the resolution used in tracking and 3D map creation), and enter the ID marker identifier and its size on the right of the page. ID markers, similar to Figure 40, are specially designed image patterns for camera calibration. See all the ID markers <a href="https://dev.metaio.com/fileadmin/user_upload/documents/sdk/IDMarkers80mm.pdf" target="_blank" class="weblink" title="Download all ID Markers">here</a>.</span></td></tr></table></div><p class="p_Body" style="text-align: center;"><img src="manuals_clip0042.png" width="404" height="404" alt="" style="margin:0px auto 0px auto;width:404px;height:404px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 40: The 19th ID Marker</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Press the </span><span class="f_CodeExample">Start</span><span class="f_Body"> button to start the calibration process. </span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Show the ID marker to the camera and slowly move it so that the toolbox can capture all angles of the ID marker. In each capture, hold the ID marker for a few seconds to allow a stable capture. When the marker overlay turns green, as shown in Figure 41, the calibration process is completed. You can then save the calibration parameters.</span></td></tr></table></div><p class="p_Body" style="text-align: center;"><img src="manuals_clip0034_zoom72.png" width="631" height="381" alt="" style="margin:0px auto 0px auto;width:631px;height:381px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 41: A Completed Calibration</span></p>
<p class="p_InternalHeading"><span class="f_InternalHeading">Creating Feature-based 3D Maps</span></p>
<p class="p_Body"><span class="f_Body">To capture the features of a real world scene/object and save it for later use, complete the following steps:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Select </span><span class="f_CodeExample">3D-Map Creation</span><span class="f_Body"> in the toolbox landing page (see Figure 38) for this feature. Figure 42 shows the 3D map creation page.</span></td></tr></table></div><p class="p_Body" style="text-align: center;"><img src="manuals_clip0036_zoom71.png" width="647" height="392" alt="" style="margin:0px auto 0px auto;width:647px;height:392px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 42: Feature-based 3D Map Creation</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">From the right side of the page, select the camera device, the stream resolution. In addition, you can select </span><span class="f_CodeExample">Sensitivity</span><span class="f_Body">, which is the size of the object to be tracked. Estimating the right size helps the tracking initialization.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Show the object to the camera so that the toolbox can learn its 3D structure. Move the object around so that the toolbox can see all aspects of the object. The toolbox visualizes the detected features as illustrated in Figure 43.</span></td></tr></table></div><p class="p_Body" style="text-align: center;"><img src="manuals_clip0037_zoom71.png" width="647" height="392" alt="" style="margin:0px auto 0px auto;width:647px;height:392px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 43: The Detected Features</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Complete the 3D map creation by pressing the </span><span class="f_CodeExample">Save 3D map</span><span class="f_Body"> button. The toolbox saves the 3D map into a </span><span class="f_CodeExample">*.slam</span><span class="f_Body"> file.</span></td></tr></table></div><p class="p_Body"><span class="f_Body">The toolbox can extend an existing 3D map by adding more detected features, or aligning it with an ID marker (setting the coordinate origin as illustrated in Figure 44). Use the </span><span class="f_CodeExample">Edit an existing 3D map</span><span class="f_Body"> option from the landing page for this feature.</span></p>
<p class="p_Body" style="text-align: center;"><img src="manuals_clip0038_zoom75.png" width="679" height="412" alt="" style="margin:0px auto 0px auto;width:679px;height:412px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 44: Align an Object with an ID Marker</span></p>
<p class="p_Body"><span class="f_Body">In addition, the toolbox enables editing the feature points of an existing 3D map. To do this:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Drag the point cloud of points around with the mouse movement. </span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Select the feature points by holding down the </span><span class="f_CodeExample">ALT</span><span class="f_Body"> key. </span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Use the </span><span class="f_CodeExample">DEL</span><span class="f_Body"> or </span><span class="f_CodeExample">Backspace</span><span class="f_Body"> key to delete the selected feature points, as illustrated in Figure 45.</span></td></tr></table></div><p class="p_Body" style="text-align: center;"><img src="manuals_clip0039_zoom57.png" width="451" height="344" alt="" style="margin:0px auto 0px auto;width:451px;height:344px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 45: Remove False Positives</span></p>
<p class="p_InternalHeading"><span class="f_InternalHeading">Edge Tracking</span></p>
<p class="p_Body"><span class="f_Body">The toolbox can create the tracking configuration from any existing CAD model. To use this feature, select the </span><span class="f_CodeExample">Edge Tracking</span><span class="f_Body"> tool from the toolbox landing page and follow the steps below:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Load the CAD model. The toolbox supports the wavefront </span><span class="f_CodeExample">*.obj</span><span class="f_Body"> format. It is recommended that the model be created with high resolutions and rich texture information. The higher the resolution of the model and its texture information, the more accurate the created line model is. It should be in a scale of 1.0 for 1 millimeter and be oriented with the Y-axis pointing forward and the Z-axis pointing up.</span></td></tr></table></div><p class="p_Body" style="text-align: center;"><img src="manuals_clip0040.png" width="520" height="309" alt="" style="margin:0px auto 0px auto;width:520px;height:309px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 46: Edge Creation Tool</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Select the view pose to initialize the tracking by moving the mouse and zooming with the mouse wheel, as illustrated in Figure 46. The grid around the model indicates the model orientation, with the Z-axis pointing up. Press the </span><span class="f_CodeExample">Next</span><span class="f_Body"> button when done.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:11pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">At this stage, the toolbox shows the overlay of line segments on top of the CAD model. You can adjust the level of details of the created line model using the slider bar on the right. The right level of details is that the line segments include all or most of the prominent distinguishable edges visible, without creating too short or cluttered lines, as illustrated in Figure 47.</span></td></tr></table></div><p class="p_Body" style="text-align: center;"><img src="manuals_clip0041_zoom75.png" width="738" height="216" alt="" style="margin:0px auto 0px auto;width:738px;height:216px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Figure 47: Example of the Ideal Edge Number</span></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">&nbsp;</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 7px 0px 7px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:17px"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Body">Click </span><span class="f_CodeExample">Accept</span><span class="f_Body"> to export the model files and the tracking configuration file. The toolkit creates a surface model file </span><span class="f_CodeExample">SurfaceModel.obj</span><span class="f_Body"> stripped of unnecessary information such as material data, &nbsp;and a line segment model file </span><span class="f_CodeExample">LineModel.obj</span><span class="f_Body">. The tracking configuration file is named </span><span class="f_CodeExample">Tracking.xml.</span></td></tr></table></div><p class="p_Body"><span class="f_Body">&nbsp;</span></p>
<p class="p_Body"><span class="f_Body">&nbsp;</span></p>

</td></tr></table>

</body>
</html>
